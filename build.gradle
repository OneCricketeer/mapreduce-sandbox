plugins {
    id 'java'
    id 'idea'
}

group 'com.avalonconsult.hadoop'
version '1.0-SNAPSHOT'

compileJava {
    options.release = 11
}

repositories {
    mavenLocal()
    mavenCentral()
}

ext {
    hadoopVersion = '2.8.5'

    packageName = 'com.avalonconsult.hadoop.mapreduce'

    outputDir = 'outFiles/'
}

dependencies {
    testImplementation 'junit:junit:4.13.2'
    testImplementation 'org.hamcrest:hamcrest:2.2'
    implementation "org.apache.hadoop:hadoop-client:${hadoopVersion}"
}

task runCustomerDriver(type: JavaExec) {
    classpath = sourceSets.main.runtimeClasspath

    mainClass = "${packageName}.CustomerDriver"

    args = ['inFiles/customer', outputDir]
}

task runDateGrouperDriver(type: JavaExec) {
    classpath = sourceSets.main.runtimeClasspath

    mainClass = "${packageName}.DateGrouperDriver"

    args = ['inFiles/dates', outputDir]
}

task runStoreSumDriver(type: JavaExec) {
    classpath = sourceSets.main.runtimeClasspath

    mainClass = "${packageName}.StoreSumDriver"

    args = ['inFiles/stores', outputDir]
}

task runTempMinMaxAvgDriver(type: JavaExec) {
    classpath = sourceSets.main.runtimeClasspath

    mainClass = "${packageName}.TempMinMaxAvgDriver"

    args = ['inFiles/temp', outputDir]
}

task runWeatherMultiDriver(type: JavaExec) {
    classpath = sourceSets.main.runtimeClasspath

    mainClass = "${packageName}.WeatherMultiDriver"

    args = ['inFiles/weather', outputDir]
}

task runWebLogDriver(type: JavaExec) {
    classpath = sourceSets.main.runtimeClasspath

    mainClass = "${packageName}.WebLogDriver"

    args = ['inFiles/web-logs', outputDir]
}

task runTokenizedLineDriver(type: JavaExec) {
    classpath = sourceSets.main.runtimeClasspath

    mainClass = "${packageName}.TokenizedLineDriver"

    args = ['inFiles/tokenized', outputDir]
}